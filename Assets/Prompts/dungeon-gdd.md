# 1. 게임 개요

## 1.1 장르

- 텍스트 기반 던전 크롤링
- 로그라이트
- 익스트랙션(Extraction) 구조
- 세계관: 중세 판타지 + 코즈믹 호러

## 1.2 핵심 플레이 사이클

1. 입장권(지도 등)을 사용해 인스턴스 던전 생성
2. 던전 탐사 (이동, 시야 확장, 적 조우)
3. 전투 (초기 구현: 오토 리졸브)
4. 전리품 획득 (루트 인벤토리)
5. 앵커(탈출 지점)에서 탈출 여부 선택
6. 탈출 성공 시 자원 보존 / 사망 시 일부 또는 전부 손실 (추후 설계)

모티브: Path of Exile의 “지도(Map)” 시스템  
→ 다양한 레이아웃의 반복 플레이형 인던 구조

---

# 2. 던전 구조

## 2.1 기본 맵 스펙 (1차 프로토타입 기준)

- 맵 크기: 10 x 40 (가로 10, 세로 40)
- 총 타일 수: 400
- 이동 가능 칸: 약 250칸 (약 60~65%)
- 진행 방향: 아래 → 위
- 플레이어 시작 위치: 하단 중앙 근처

### 플레이타임 목표 (파밍 던전 기준)

- 5~20분

## 2.2 던전 타입

### 1) 시나리오 던전

- 수작업 레벨 디자인
- 고정 이벤트
- 특정 보스 및 트리거 존재

### 2) 파밍 던전 (인스턴스)

- 입장권 사용
- 레이아웃 랜덤 생성
- 1자 맵, 미로 맵 등 프리셋 재사용

초기 구현:  
→ 1자 진행형 40x10 맵

---

# 3. 타일 시스템

## 3.1 타일 크기 (UI 기준)

- 기본: 18x18px
- 배치 간격: 17x17
- 변경 가능성: 17x17 or 19x19 (아이콘 제작 후 확정)

## 3.2 타일 상태 (식별 단계)

### 1) 알 수 없음

- 방 존재 여부도 모름

### 2) 가려짐

- 통로인지 벽인지 정도만 확인 가능

### 3) 식별됨

- 시야 내
- 시야 밖

## 3.3 시야 시스템

### 이동 시 처리

이동 후:

- 5x5 범위 → “알 수 없음” → “가려짐”
- 3x3 범위 → “식별됨”

### 시야 구분

- 플레이어 중심 3x3 → 시야 내
- 그 외 식별된 타일 → 시야 밖

### 시야 밖 처리

- 위치 고정 이벤트 → 유지
- 위치 변동 이벤트(적) → 사라짐

---

# 4. 탐험 시스템

## 4.1 이동

- 클릭한 타일로 이동
- 1칸 거리 → 1회 클릭
- 2칸 이상 → 2회 클릭 후 경로 따라 1칸씩 이동 (선택 구현)

## 4.2 이벤트 ID 수집 시스템

- 이동 시 플레이어 중심 3x3 타일의 이벤트 ID 수집
- 최근 5회 이동 데이터 저장
- 수집된 ID 수에 따라 탐험 텍스트 출력

### 예시

- 빈 타일 45회 누적  
  → “평화로움” 텍스트 랜덤 출력  
  → 쿨타임 10턴

- 벽 타일 3개 동시 수집  
  → “가로막힘” 메시지  
  → 쿨타임 5턴

- 적 힌트 텍스트 발생 시  
  → 이벤트 ID 초기화

---

# 5. Heat 시스템 (현재 보류)

## 개념

- 이동할 때마다 Heat 증가
- Darkest Dungeon의 횃불 감소와 유사

## 현재 상태

- 기본 시스템에 연결은 가능하나
- 프로토타입 단계에서는 미적용
- 추후 피로도 시스템과 연계 가능

---

# 6. 적 시스템

## 6.1 공통 사항

- 맵 상에서 심볼 형태로 존재
- 거리 기반 힌트 시스템
- 동일 칸 진입 시 전투

초기 전투:  
→ Auto-resolve (수치 계산 후 결과만 출력)

## 6.2 일반 적

### 배치 규칙

- 전체 이동 가능 칸의 5~8%
- 주요 통로 및 전리품 인접 위치
- 완전 회피 불가 구조 유지

### 거리 로직

- 거리 2칸 → 힌트 텍스트
- 거리 1칸 → 적 심볼 표시
- 동일 칸 → 전투

## 6.3 엘리트

### 배치

- 고급 전리품 인접
- 또는 던전당 0~n마리 랜덤

### 거리 로직

- 거리 3칸 → 힌트
- 거리 2칸 → 심볼 표시
- 동일 칸 → 전투

## 6.4 보스

- 맵당 1마리
- 스폰 반대편 배치

### 거리 로직

- 거리 4칸 → 힌트
- 거리 3칸 → 심볼 표시 + 3x3 가려짐 처리
- 동일 칸 → 전투

---

# 7. 맵 상 적 이동 시스템

## 기본 구조

- 플레이어 2회 이동 → 적 1회 이동

## 목적

- 완전 회피 방지
- 최소한의 긴장감 제공
- 과도한 추적 방지

## 이동 타입

- Wander (랜덤)
- Patrol (경로 지정)
- Chase (플레이어 추적)

스토리 던전에서는:

- 일부 특수 적 → 1:1 턴 추적 가능

---

# 8. 전리품 시스템

## 8.1 루트 인벤토리

- NxN 격자형 창
- 전투 후 생성
- 아이템 1~n개 생성

### 규칙

- 가방 → 루트 인벤토리 이동 가능
- 루트 인벤토리 → 가방 이동 가능
- 이벤트 종료 시 루트 인벤토리 잔여 아이템 파괴

## 8.2 일반 전리품

- 스폰 위치: 시작점에서 20칸 이상 떨어진 랜덤 위치
- 주변 몬스터 최소 1마리

## 8.3 고급 전리품

- 엘리트 처치 필요
- 잠금 상태 존재
- 엘리트 처치 시 개방

---

# 9. 이벤트 구역

## 9.1 정보 구역 (망루)

- 반경 7x7 식별
- 탈출 지점 방향 표시
- 엘리트/보스 단서 제공

## 9.2 안전 구역 (화톳불)

- HP 일부 회복 (1회)
- 선택 시 Heat 증가 가능

## 9.3 기타 이벤트

- 상인
- 랜덤 회복
- 스토리 트리거 이벤트

---

# 10. 탈출 지점 (기억의 닻, Anchor)

## 인스턴스 던전

- 시작 지점 근처 1개
- 보스 처치 후 현재 위치 인접 1개 생성

## 기능

- 탈출 선택
- 탐험 지속 선택
- HP/MP 전회복
- 경험치 기록
- 앵커 간 패스트 트래블

---

# 11. UI 및 카메라

## 미들박스 시스템

- 8x5 타일 영역
- 플레이어는 이 영역 내부에 유지

## 카메라 규칙

- 플레이어가 항상 맵 중앙 (미들박스의 중앙)에 있으려고 함

---

# 12. 개발 단계 로드맵

1. 맵 제작 툴
2. 플레이어 이동
3. 전투 오토 리졸브
4. 아이템 획득
5. 던전 탈출
6. 전투 시스템 실제 구현
7. 거점 및 인벤토리 확장

---

# 최종 요약

이 프로젝트는 다음을 목표로 하는 로그라이트 익스트랙션 게임이다:

- 텍스트 중심 탐사
- 아이템 획득 후 탈출 중심 구조
- 중세 코즈믹 호러 분위기
- 반복 가능한 인스턴스 던전 시스템

현재 단계의 명확한 목표는:

40x10 맵 기반 탐사 → 적 조우 → 오토 전투 → 전리품 획득 → 탈출

까지를 완성하는 것이다.
